---
title: "Put the entire Quartz code into o1 Pro."
---

- [A tool to put all the source code of a project into the clipboard at once

<img src='https://scrapbox.io/api/pages/nishio-en/o1 Pro/icon' alt='o1 Pro.icon' height="19.5"/>
This code defines various components, resource conversion functions, and page emitters (404 pages, content pages, folder pages, tag pages, etc.) for Quartz, a static site generation framework.
In `resources.tsx` in the `util/` directory, functions to convert JS and CSS resources to `<script>` and `<link>`, and the `StaticResources` type are defined.
`util/jsx.tsx` converts hast HTML ASTs to Preact JSX and allows you to specify custom components (e.g. `<table>`).
The `util/og.tsx` directory defines the image generation related processes for Open Graph using Satori, `util/resources.tsx` contains the elementalization functions for scripts and style resources, the `plugins/emitters` directory provides the logic to output 404 pages, folder list, tag page The `components/` directory defines UI components such as title, table of contents, tag list, search, and comment fields.
As a whole, it is a collection of modules for converting markdown content to HTML, styling, adding navigation and meta information, generating OG images, etc. using Quartz.

<img src='https://scrapbox.io/api/pages/nishio-en/nishio/icon' alt='nishio.icon' height="19.5"/>Where is the part of the process that handles reverse links, etc.?

<img src='https://scrapbox.io/api/pages/nishio-en/o1 Pro/icon' alt='o1 Pro.icon' height="19.5"/>The processing of backlinks is implemented in `components/Backlinks.tsx`.
Within this component, `allFiles` is traversed to extract files that link to the current page (`slug`), and the list is displayed. Specifically, the code like `backlinkFiles = allFiles.filter((file) => file.links?.includes(slug))` is used to get the reverse link destinations.

<img src='https://scrapbox.io/api/pages/nishio-en/nishio/icon' alt='nishio.icon' height="19.5"/>Are you reading all the pages on each page without creating a global data structure?

<img src='https://scrapbox.io/api/pages/nishio-en/o1 Pro/icon' alt='o1 Pro.icon' height="19.5"/>The `allFiles` are loaded in batches during the build process and are arrays or objects that hold the data of all pages processed together (generated by the build pipeline). When rendering each page, this `allFiles` is passed as a property of the component. Therefore, individual pages do not reload other pages on their own, but each page filters and searches against the global data structure `allFiles` at the build stage.

<img src='https://scrapbox.io/api/pages/nishio-en/nishio/icon' alt='nishio.icon' height="19.5"/>Even if you're putting it in memory, it's O(N^2), right?

<img src='https://scrapbox.io/api/pages/nishio-en/o1 Pro/icon' alt='o1 Pro.icon' height="19.5"/>Indeed, because of the processing involved in traversing allFiles at rendering time for each page (e.g., reverse link extraction) in this implementation, if the number of pages is N, it will take at worst O(N^2) computation time.
Since the allFiles data structure for all pages is prepared in memory at the time of build, and the allFiles are filtered each time when processing each page, it may become inefficient as the scale increases.

---
This page is auto-translated from [/nishio/Quartzのコードをまるごとo1 Proに入れる](https://scrapbox.io/nishio/Quartzのコードをまるごとo1 Proに入れる) using DeepL. If you looks something interesting but the auto-translated English is not good enough to understand it, feel free to let me know at [@nishio_en](https://twitter.com/nishio_en). I'm very happy to spread my thought to non-Japanese readers.